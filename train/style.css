/* style.css */

/* ルート要素でゲーム全体のスケールファクターを定義 */
:root {
    --base-game-width: 960;
    --base-game-height: 540;
    /* 現在のビューポートに対してゲームがどれだけ収まるかを計算 (例えばPCで2倍の画面なら2.0、スマホ縦持ちで半分なら0.5など) */
    --current-game-scale: min(100vw / var(--base-game-width), 100vh / var(--base-game-height));
}

body {
    margin: 0;
    overflow: hidden; /* スクロールバーが表示されないようにする */
    font-family: 'Arial', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh; /* ビューポートの高さに合わせる */
    background-color: #333; /* 背景色 */
    color: #eee; /* デフォルトの文字色 */
    /* width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; は削除 */
}

#game-container {
    /* ゲームの実際の幅と高さをスケールファクターで計算 */
    width: calc(var(--base-game-width) * var(--current-game-scale));
    height: calc(var(--base-game-height) * var(--current-game-scale));
    
    position: relative;
    background-color: #000;
    overflow: hidden;
    /* 枠線や影もスケールファクターに合わせて調整 */
    border: calc(5px * var(--current-game-scale)) solid #555;
    box-shadow: 0 0 calc(20px * var(--current-game-scale)) rgba(0, 0, 0, 0.5);
}

canvas {
    display: block; /* 余白をなくす */
    position: absolute; /* 他のUIと重ねるため */
    top: 0;
    left: 0;
    width: 100%; /* 親要素の幅に合わせて拡大・縮小 */
    height: 100%; /* 親要素の高さに合わせて拡大・縮小 */
    z-index: 10; /* 最も奥 */
}

/* 各画面の基本スタイル */
.game-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none; /* デフォルトでは非表示 */
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background-color: rgba(0, 0, 0, 0.8); /* 半透明の黒いオーバーレイ */
    color: white;
    /* font-size や padding は個々の要素で --scale-factor を使って調整 */
    text-align: center;
    transition: opacity 0.3s ease-in-out; /* フェードイン・アウト用 */
    opacity: 0; /* 最初は透明 */
    pointer-events: none; /* クリックイベントを透過させる */
    z-index: 100; /* キャンバスより手前 */
}

.game-screen.active {
    display: flex; /* active クラスが付いたら表示 */
    opacity: 1; /* 不透明にする */
    pointer-events: auto; /* クリックイベントを有効にする */
    z-index: 110; /* アクティブな画面はさらに手前に */
}

/* 全ボタン共通のスタイル */
button {
    padding: calc(15px * var(--current-game-scale)) calc(30px * var(--current-game-scale)); /* スケールに合わせて調整 */
    font-size: calc(1em * var(--current-game-scale)); /* スケールに合わせて調整 */
    cursor: pointer;
    background-color: #007bff; /* 青色 */
    color: white;
    border: none;
    border-radius: calc(8px * var(--current-game-scale)); /* スケールに合わせて調整 */
    transition: background-color 0.2s, transform 0.1s;
    box-shadow: 0 calc(4px * var(--current-game-scale)) calc(6px * var(--current-game-scale)) rgba(0, 0, 0, 0.3); /* スケールに合わせて調整 */
    margin-top: calc(40px * var(--current-game-scale)); /* スケールに合わせて調整 */
}

button:hover {
    background-color: #0056b3; /* ホバー時の色 */
    transform: translateY(calc(-2px * var(--current-game-scale))); /* スケールに合わせて調整 */
    box-shadow: 0 calc(6px * var(--current-game-scale)) calc(8px * var(--current-game-scale)) rgba(0, 0, 0, 0.4); /* スケールに合わせて調整 */
}

button:active {
    background-color: #003d80; /* クリック時の色 */
    transform: translateY(0); /* 押し込む感じ */
    box-shadow: 0 calc(2px * var(--current-game-scale)) calc(4px * var(--current-game-scale)) rgba(0, 0, 0, 0.2);
}


/* タイトル画面 */
#title-screen {
    font-size: calc(2.5em * var(--current-game-scale)); /* スケールに合わせて調整 */
}

#title-screen p {
    font-size: calc(0.6em * var(--current-game-scale)); /* スケールに合わせて調整 */
    margin-top: calc(20px * var(--current-game-scale)); /* スケールに合わせて調整 */
    color: #ccc;
}

#last-result {
    font-size: calc(0.5em * var(--current-game-scale)); /* スケールに合わせて調整 */
    margin-top: calc(30px * var(--current-game-scale)); /* スケールに合わせて調整 */
    color: #bbb;
}

/* ゲームプレイ中のUI */
#game-play-ui {
    position: absolute; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: transparent; 
    pointer-events: none; 
    display: none; 
    z-index: 90; 
}

#game-play-ui.active {
    display: block; 
}

/* 距離表示 */
#distance-display {
    position: absolute; 
    top: calc(20px * var(--current-game-scale)); /* スケールに合わせて調整 */
    left: 50%; 
    transform: translateX(-50%); 
    font-size: calc(2.5em * var(--current-game-scale)); /* スケールに合わせて調整 */
    color: #FFFFFF; 
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8); 
    z-index: 100; 
    white-space: nowrap; 
    pointer-events: none; 
}


/* リザルト画面 */
#result-screen h2 {
    font-size: calc(1.5em * var(--current-game-scale)); /* スケールに合わせて調整 */
    margin-bottom: calc(20px * var(--current-game-scale)); /* スケールに合わせて調整 */
}

#result-screen p {
    font-size: calc(0.8em * var(--current-game-scale)); /* スケールに合わせて調整 */
    margin-bottom: calc(10px * var(--current-game-scale)); /* スケールに合わせて調整 */
}